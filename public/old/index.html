<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Shusmo.io | Game Studio</title>
		<link rel="icon" type="image/x-icon" href="./favicon.ico" />

		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			:root {
				--background: #060608;
				--color: #fafafa;
			}

			html,
			body {
				width: 100%;
				height: 100%;
				font-family: Arial;
			}

			body {
				display: flex;
				justify-content: center;
				align-items: center;
				background: var(--background);
			}

			.container {
				color: var(--color);
				font-size: 1.5rem;
				display: flex;
				flex-direction: column;
			}

			.right {
				text-align: right;
				width: 100%;
				position: relative;
				left: 100px;
			}
			.left {
				position: relative;
				left: -100px;
				text-align: left;
				width: 100%;
			}

			.stack {
				display: grid;
				grid-template-columns: 1fr;
			}

			.glitched {
				font-weight: bold;
				grid-row-start: 1;
				grid-column-start: 1;
				font-size: 12rem;
				--stack-height: calc(100% / var(--stacks) - 1px);
				--inverse-index: calc(calc(var(--stacks) - 1) - var(--index));
				--clip-top: calc(var(--stack-height) * var(--index));
				--clip-bottom: calc(var(--stack-height) * var(--inverse-index));
				clip-path: inset(var(--clip-top) 0 var(--clip-bottom) 0);
				animation: stack 340ms cubic-bezier(0.46, 0.29, 0, 1.24) 1 backwards
						calc(var(--index) * 120ms),
					glitch 2s ease infinite 2s alternate-reverse;
			}

			.fix span {
				animation: stack 340ms cubic-bezier(0.46, 0.29, 0, 1.24) 1 backwards
						calc(var(--index) * 120ms),
					glitch 2s ease infinite 2s alternate-reverse;
			}
			.glitched:nth-child(odd) {
				--glitch-translate: 8px;
			}
			.glitched:nth-child(even) {
				--glitch-translate: -8px;
			}
			.glitched:nth-child(odd) {
				--glitch-translate: 2px;
			}
			.glitched:nth-child(even) {
				--glitch-translate: -2px;
			}
			.stack .smaller {
				font-size: 2rem;
			}
			.unglitched {
				font-weight: bold;
				grid-row-start: 1;
				grid-column-start: 1;
				font-size: 12rem;
				--stack-height: calc(100% / var(--stacks) - 1px);
				--inverse-index: calc(calc(var(--stacks) - 1) - var(--index));
				--clip-top: calc(var(--stack-height) * var(--index));
				--clip-bottom: calc(var(--stack-height) * var(--inverse-index));
			}
			.stack .smaller {
				font-size: 2rem;
			}
			@keyframes stack {
				0% {
					opacity: 0;
					transform: translateX(-50%);
					text-shadow: -2px 3px 0 red, 2px -3px 0 blue;
				}
				60% {
					opacity: 0.5;
					transform: translateX(50%);
				}
				80% {
					transform: none;
					opacity: 1;
					text-shadow: 2px -3px 0 red, -2px 3px 0 blue;
				}
				100% {
					text-shadow: none;
				}
			}

			@keyframes glitch {
				0%,
				50% {
					text-shadow: -2px 3px 0 red, 2px -3px 0 blue;
					transform: translate(var(--glitch-translate));
				}
				2%,
				40%,
				80% {
					text-shadow: 2px -3px 0 red, -2px 3px 0 blue;
				}
				4%,
				100% {
					text-shadow: none;
					transform: none;
				}
			}
		</style>
	</head>
	<body>
		<div class="container">
			<div class="stack left" id="comming-stack" style="--stacks: 3">
				<span style="--index: 0" class="smaller glitched">coming soon!</span>
				<span style="--index: 1" class="smaller glitched">coming soon!</span>
				<span style="--index: 2" class="smaller glitched">coming soon!</span>
			</div>
			<div class="stack" id="Shusmo-stack" style="--stacks: 3">
				<span style="--index: 0" class="Shusmo glitched">Shusmo</span>
				<span style="--index: 1" class="Shusmo glitched">Shusmo</span>
				<span style="--index: 2" class="Shusmo glitched">Shusmo</span>
			</div>
			<div class="stack right" id="studio-stack" style="--stacks: 3">
				<span style="--index: 0" class="smaller glitched">Game Studio</span>
				<span style="--index: 1" class="smaller glitched">Game Studio</span>
				<span style="--index: 2" class="smaller glitched">Game Studio</span>
			</div>
		</div>
		<script>
			NodeList.prototype[Symbol.iterator] = Array.prototype[Symbol.iterator];
			HTMLCollection.prototype[Symbol.iterator] =
				Array.prototype[Symbol.iterator];
			function delay(milliseconds) {
				return new Promise((resolve) => {
					setTimeout(resolve, milliseconds);
				});
			}
			String.prototype.replaceAt = function (index, replacement) {
				return (
					this.substring(0, index) +
					replacement +
					this.substring(index + replacement.length)
				);
			};
			let num = 0;
			// let change = async()=>{
			//     while(true) {
			//         let els =document.getElementsByClassName("Shusmo");
			//         console.log(els);
			//         [].forEach.call(els, async (element) => {
			//             console.log("inner");
			//             element.innerHTML=(num%7==0)?"Shusmo":(num%2==0)?"?!?!":"Shusmo";
			//             if(num%7!=0)num++;
			//             await delay(90);

			//         });
			//         num+=2;
			//         await delay(90);

			//     }
			// }

			function getRandomInt(max) {
				return Math.floor(Math.random() * max);
			}
			let change = async () => {
				var ShusmoText = "Shusmo";
				const ori = "Shusmo";
				var flip = false;
				var date1 = new Date();
				const car = ["?", "!", "$", "%", "#"];
				while (true) {
					let els = document.getElementsByClassName("Shusmo");

					[].forEach.call(els, async (element) => {
						ShusmoText = ShusmoText.replaceAt(num % 4, " ");

						element.innerHTML = ShusmoText;
						await delay(180);
						ShusmoText =
							ShusmoText.substring(0, num % 4) +
							car[getRandomInt(5)] +
							ShusmoText.substring(num % 4);
						element.innerHTML = ShusmoText;
						await delay(110);
					});
					num++;
					await delay(390);
					console.log(Date() - date1);
					if (new Date() - date1 >= 1723) {
						ShusmoText = ori;
						[].forEach.call(els, async (element) => {
							element.innerHTML = ShusmoText;
						});
						// document.getElementById("Shusmo-stack").classList.remove("span");
						document.getElementById("Shusmo-stack").classList.add("fix");

						await delay(1990);
						// document.getElementById("Shusmo-stack").classList.add("span");
						document.getElementById("Shusmo-stack").classList.remove("fix");
						let glitched = document.getElementsByClassName("glitched");
						let i = 0;
						[].forEach.call(glitched, function (el) {
							console.log(i++ + el);
							console.log(glitched.length);
							el.classList.add("unglichted");
						});
						await delay(1990);
						[].forEach.call(glitched, function (el) {
							el.classList.remove("unglichted");
						});
						num++;
						flip = !flip;
						date1 = new Date();
					}
				}
			};
			change();
		</script>
	</body>
</html>
?
